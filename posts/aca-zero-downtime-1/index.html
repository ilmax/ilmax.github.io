<!doctype html><html lang=en-us><head><title>Zero downtime deployment with Azure Container Apps and Github Actions - Part 1 // Massimiliano's Tech Chronicles</title><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Massimiliano Donini"><meta name=description content><link rel=stylesheet href=/css/main.min.cdda4555892afe80e149565d48e4ff09319ebdbd7b121ad7910661daac049b82.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-QK96EXLDNF"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QK96EXLDNF",{anonymize_ip:!1})}</script><meta name=twitter:card content="summary"><meta name=twitter:title content="Zero downtime deployment with Azure Container Apps and Github Actions - Part 1"><meta name=twitter:description content="Introduction As you may know, Azure Container Apps went out of preview during Microsoft Build in late May this year. Azure Container Apps is a very interesting service that runs on top of Kubernetes adding some additional powerful capabilities in a simple and covinient way. Some of these capabilities are:
Built in support for Keda autoscalers Built in support for Dapr components Ability to scale to zero There&rsquo;s a lot more to it, you can dig deeper on the official Microsoft documentation here"><meta property="og:title" content="Zero downtime deployment with Azure Container Apps and Github Actions - Part 1"><meta property="og:description" content="Introduction As you may know, Azure Container Apps went out of preview during Microsoft Build in late May this year. Azure Container Apps is a very interesting service that runs on top of Kubernetes adding some additional powerful capabilities in a simple and covinient way. Some of these capabilities are:
Built in support for Keda autoscalers Built in support for Dapr components Ability to scale to zero There&rsquo;s a lot more to it, you can dig deeper on the official Microsoft documentation here"><meta property="og:type" content="article"><meta property="og:url" content="https://maxdon.tech/posts/aca-zero-downtime-1/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-24T10:12:18+00:00"><meta property="article:modified_time" content="2022-06-24T10:12:18+00:00"></head><body><header class=app-header><a href=https://maxdon.tech><img class=app-header-avatar src=/avatar.jpg alt="Massimiliano Donini"></a>
<span class=app-header-title>Massimiliano's Tech Chronicles</span><p>My adventures in Tech</p><nav class=app-header-menu><a class=app-header-menu-item href=/>Home</a>
|
<a class=app-header-menu-item href=/about/>About</a>
|
<a class=app-header-menu-item href=/tags/>Tags</a></nav><div class=app-header-social><a href=https://github.com/ilmax target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>GitHub</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://twitter.com/maxx_don target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>Twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://www.linkedin.com/in/massimiliano-donini/ target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin"><title>LinkedIn</title><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>Zero downtime deployment with Azure Container Apps and Github Actions - Part 1</h1><div class=post-meta><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Jun 24, 2022</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>8 min read</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://maxdon.tech/tags/azure/>azure</a>
<a class=tag href=https://maxdon.tech/tags/github/>github</a>
<a class=tag href=https://maxdon.tech/tags/devops/>devops</a>
<a class=tag href=https://maxdon.tech/tags/cloudnative/>cloudnative</a></div></div></header><div class=post-content><h2 id=introduction>Introduction</h2><p>As you may know, Azure Container Apps went out of preview during Microsoft Build in late May this year.
Azure Container Apps is a very interesting service that runs on top of Kubernetes adding some additional powerful capabilities in a simple and covinient way.
Some of these capabilities are:</p><ul><li>Built in support for Keda autoscalers</li><li>Built in support for Dapr components</li><li>Ability to scale to zero</li></ul><p>There&rsquo;s a lot more to it, you can dig deeper on the official Microsoft documentation <a href=https://docs.microsoft.com/en-us/azure/container-apps/>here</a></p><blockquote><p>TL;DR; All the code described in this article is available on Github <a href=https://github.com/ilmax/container-apps-sample/releases/tag/v0.3>here</a>
I&rsquo;m still working on improvements so main branch may be updated by the time you read this.</p></blockquote><h2 id=requirements>Requirements</h2><p>I would like to migrate several Azure App Services to Azure Container Apps, I have two different type of services, http api that write to a Service Bus queue/topic and web jobs that consume and process the messages, a pretty common setup these days.</p><p>Azure Container Apps allows me to easily scale the web jobs based on the amount of messages present in the queue/topic and also makes it easy to scale to zero outside business hours.</p><p>In order to migrate from Azure App Service to Azure Container Apps I want to implement a zero downtime deployment for the http api services.</p><h2 id=problem>Problem</h2><p>Azure Container Apps has built in support for <a href=https://docs.microsoft.com/en-us/azure/container-apps/health-probes>health probes</a>, there are 3 types of health probes:</p><ul><li>Liveness</li><li>Readiness</li><li>Startup</li></ul><p>Given the built-in health probes support, I went under the assumption that, while using single revision mode, we could just deploy another revision and the control plane could take care of warming up and then swapping traffic to the new revision without downtime.
To my surprise I figured out that&rsquo;s not the case and if you&rsquo;re reading this blog post, you might have noticed that too.</p><p>I also double checked it on <a href=https://aka.ms/containerapps-discord>Discord</a> with the Azure Container Apps team if I was missing something on my end, but they confirmed my findings.</p><hr><p>After doing a bit of research, I figured it out that I can implement my own workflow to implement zero downtime deployment. This is far from ideal but still better than a deployment process that causes downtime.
Hopefully Azure Container Apps will implement built support for zero downtime deployment, but in the meantime the following approach is an acceptable workaround.</p><h2 id=solution>Solution</h2><p>In order to implement zero downtime deployment in (pseudo) single revisions mode (meaning using multiple revision mode with a single active revision at a time, serving all the traffic), we need to do the following steps:</p><ol><li>Redirect all the traffic to the latest revision by name (more on that later)</li><li>Deploy a new revision</li><li>Warm up the new revision</li><li>Redirect the traffic to the newly deployed revision</li></ol><blockquote><p>In this blog post I am using multiple revision mode because it happened to me that moving from single revision to multiple revision mode caused downtime - I&rsquo;m currently investigating it and will update this post as soon as I found.
The idea is to have the container app configured in multiple revision mode but only have one active revision at a time.</p></blockquote><p>Regarding step 1, Redirect all the traffic to the latest revision by name, has to do with the <strong>latest</strong> revision alias.
I found that if the traffic is set to the latest revision, when deploying a new revision, the traffic get redirected to the new revision even while it&rsquo;s still in the provisioning state, leading to possible timeouts and failures on the caller side.</p><p>The workflow above is a bit long but not particularly difficult, and we can easily implement it with the help of the Azure Cli <strong>containerapp</strong> extension.</p><p>Out of all the steps above, point 3 (Warm up the new revision) is the most tricky since different services may have different health probe configurations. I really didn&rsquo;t want to duplicate health probe configurations in the infrastructure and in the deployment pipeline but rather reuse what has been configured in the Container App Container instead.</p><p>Dynamically discovering and calling the health probe in bash is doable but I am a bit more proficient writing that code in a high level language so I decided to write a small C# application to do that.</p><p>In order to manage Azure resources, we can use the Azure Management SDK, this is a set of packages that allows you to manage Azure resources in your language of choice.
You can find all the supported resources <a href=https://azure.github.io/azure-sdk-for-net/>here</a>.</p><p>Luckily, Azure Container Apps already have an SDK available, although in beta at the moment of writing.</p><p>Since I should be able to invoke this application from a Github Action, I decided to implementing a web application that exposes an api to make my life easy.</p><p>Essentially all the steps described above but steps 4 are executed in a github action, while step 4 is executed by a web application invoked by cURL in the Github Actions.</p><p>The next point to solve is where should be this web application deployed, we have few options:</p><ul><li>Have it always available</li><li>Make it available on demand</li></ul><blockquote><p>If you deploy an internal Azure Container App Environment and the application is not exposed to the internet, point two may be a bit more complicated since you need to make sure the github action runner can reach the Azure Container App you want to warm up.</p></blockquote><p>I initially went with the first approach, having the application always available, but since I didn&rsquo;t want to also add authentication to the mix (to make sure only verified clients can call the warmup endpoint), I later decided against it.</p><p>In order to make this application available on demand, I decided to use Github Actions service container.
This post is getting already a bit too long so I won&rsquo;t go into detail of what service container is, let&rsquo;s just say that it allows you to run a container and made it available on the runner. If you wanna dig deeper, you can check the documentation <a href=https://docs.github.com/en/actions/using-containerized-services/about-service-containers>here</a></p><p>After sorting the Github Actions service container, last problem that I had to tackle was how to authenticate the application against Azure.
Thanks to <strong>Azure.Identity</strong> package and the <strong>DefaultAzureCredential</strong> class, we can just set some environment variables and authenticate with a previously defined service principal.</p><h3 id=azure-management-sdk-authentication>Azure management SDK authentication</h3><p>In order to get the required credentials to authenticate, we need to create a service principal with the <strong>Reader</strong> role on the resource group that contains the Azure Container Apps.
We can quickly create this with the az cli and the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>az ad sp create-for-rbac -n <span style=color:#e6db74>&#34;HealthProbeSp&#34;</span> --role Contributor --scopes /subscriptions/<span style=color:#f92672>{</span>subscriptionId<span style=color:#f92672>}</span>/resourceGroups/<span style=color:#f92672>{</span>resourceGroupId<span style=color:#f92672>}</span>
</span></span></code></pre></div><blockquote><p>Remember to replace the subscription and resource group names</p></blockquote><p>After setting all this up, I was able to implement zero downtime deployment.</p><p>Here&rsquo;s an extract of the Github Action:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>build ${{ matrix.services.appName }}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>permissions</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>contents</span>: <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>packages</span>: <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>health-invoker</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>ghcr.io/${{ github.repository }}/health-invoker:main</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>5000</span>:<span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>AZURE_TENANT_ID</span>: <span style=color:#ae81ff>${{ secrets.AZURE_TENANT_ID }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>AZURE_CLIENT_ID</span>:  <span style=color:#ae81ff>${{ secrets.AZURE_CLIENT_ID }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>AZURE_CLIENT_SECRET</span>: <span style=color:#ae81ff>${{ secrets.AZURE_CLIENT_SECRET }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Azure__SubscriptionId</span>: <span style=color:#ae81ff>${{ secrets.AZURE_SUBSCRIPTION_ID }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Azure__ResourceGroupName</span>: <span style=color:#ae81ff>${{ secrets.RESOURCE_GROUP_NAME }}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Clone repo, Build and push omitted for brevity </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy azure container app without downtime</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>github.event_name != &#39;pull_request&#39; &amp;&amp; matrix.services.zeroDowntime == true</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;Installing containerapp extension&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          az extension add --name containerapp --upgrade &amp;&gt; /dev/null
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;Get latest active revision name&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          latest_revision=$(az containerapp show -n ${{ matrix.services.appName }} -g ${{ secrets.RESOURCE_GROUP_NAME }} --query properties.latestRevisionName -o tsv)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;Redirect traffic to active revision $latest_revision&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          az containerapp ingress traffic set -n ${{ matrix.services.appName }} -g ${{ secrets.RESOURCE_GROUP_NAME }} --revision-weight $latest_revision=100 &amp;&gt; /dev/null
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;Create new revision&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          az containerapp update -n ${{ matrix.services.appName }} -g ${{ secrets.RESOURCE_GROUP_NAME }} -i ${{ steps.image-tag.outputs.tag }} &amp;&gt; /dev/null
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          new_revision=$(az containerapp show -n ${{ matrix.services.appName }} -g ${{ secrets.RESOURCE_GROUP_NAME }} --query properties.latestRevisionName -o tsv)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;Warmup new revision at ${{ env.WARMUP_APP }}/warmup/${{ matrix.services.appName }}&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          health_response_status=$(curl -m 180 --write-out &#34;%{http_code}\n&#34; -s ${{ env.WARMUP_APP }}/warmup/${{ matrix.services.appName }} --output backend.txt)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          if [ $health_response_status = &#34;200&#34; ]; then
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            echo &#34;Redirect traffic to new revision $new_revision&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            az containerapp ingress traffic set -n ${{ matrix.services.appName }} -g ${{ secrets.RESOURCE_GROUP_NAME }} --revision-weight $new_revision=100 $latest_revision=0 &amp;&gt; /dev/null
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            echo &#34;Deactivate revision $latest_revision&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            az containerapp revision deactivate -n ${{ matrix.services.appName }} -g ${{ secrets.RESOURCE_GROUP_NAME }} --revision $latest_revision &amp;&gt; /dev/null
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          else
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            echo &#34;Warmup failed with status code $health_response_status&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            cat ./backend.txt
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            echo &#34;Redirect traffic to active revision $latest_revision&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            az containerapp ingress traffic set -n ${{ matrix.services.appName }} -g ${{ secrets.RESOURCE_GROUP_NAME }} --revision-weight $latest_revision=100 &amp;&gt; /dev/null
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            if [ ! -z &#34;$new_revision&#34; ]; then
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              echo &#34;Deactivate revision $new_revision&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              az containerapp revision deactivate -n ${{ matrix.services.appName }} -g ${{ secrets.RESOURCE_GROUP_NAME }} --revision $new_revision &amp;&gt; /dev/null
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            fi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            exit 1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          fi</span>          
</span></span></code></pre></div><p>Here&rsquo;s the output of <a href=https://github.com/wg/wrk>wrk</a> while deploying a new revision:</p><pre tabindex=0><code>wrk -t12 -c400 -d30s https://xxxxxxxx.azurecontainerapps.io/api/echo/ping
Running 30s test @ https://xxxxxxxx.azurecontainerapps.io/api/echo/ping
  12 threads and 400 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   268.53ms  123.73ms   1.02s    68.90%
    Req/Sec   137.15    103.17     1.15k    66.59%
  41604 requests in 30.10s, 8.89MB read
Requests/sec:   1382.32
Transfer/sec:    302.38KB
</code></pre><p>After deployment has been completed:</p><pre tabindex=0><code>wrk -t12 -c400 -d30s https://xxxxxxxx.azurecontainerapps.io/api/echo/ping
Running 30s test @ https://xxxxxxxx.azurecontainerapps.io/api/echo/ping
  12 threads and 400 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   251.00ms  135.47ms   1.24s    77.22%
    Req/Sec   148.38    104.52   434.00     63.10%
  44970 requests in 30.09s, 9.61MB read
Requests/sec:   1494.36
Transfer/sec:    326.89KB
</code></pre><p>As you can see there&rsquo;s almost no difference and, most importantly, wrk doesn&rsquo;t indicate any non 2XX or 3XX response meaning that we were able to serve all requests while deploying a new revision.</p><blockquote><p>The numbers are quite low because I&rsquo;m using a very small configuration for testing purposes (0.25 Cores and 0.5 Gi of memory)</p></blockquote><hr><p>I hope you find this helpful and if you have suggestions , donâ€™t hesitate to comment or reach me out via twitter at <a href=twitter.com/maxx_don>twitter.com/maxx_don</a>.</p><p>Stay tuned for part 2 that will be out very soon!</p></div><div class=post-footer><style>.resp-sharing-button__link,.resp-sharing-button__icon{display:inline-block}.resp-sharing-button__link{text-decoration:none;color:#fff!important;margin:.2em}.resp-sharing-button{border-radius:5px;transition:25ms ease-out;padding:.5em .75em;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.resp-sharing-button__icon svg{width:1em;height:1em;margin-right:.4em;vertical-align:middle}.resp-sharing-button--small svg{margin:0;vertical-align:middle}.resp-sharing-button__icon{stroke:#fff;fill:none}.resp-sharing-button__icon--solid,.resp-sharing-button__icon--solidcircle{fill:#fff;stroke:none}.resp-sharing-button--twitter{background-color:#55acee}.resp-sharing-button--twitter:hover{background-color:#2795e9}.resp-sharing-button--pinterest{background-color:#bd081c}.resp-sharing-button--pinterest:hover{background-color:#8c0615}.resp-sharing-button--facebook{background-color:#3b5998}.resp-sharing-button--facebook:hover{background-color:#2d4373}.resp-sharing-button--tumblr{background-color:#35465c}.resp-sharing-button--tumblr:hover{background-color:#222d3c}.resp-sharing-button--reddit{background-color:#ff4500}.resp-sharing-button--reddit:hover{background-color:#3a80c1}.resp-sharing-button--google{background-color:#dd4b39}.resp-sharing-button--google:hover{background-color:#c23321}.resp-sharing-button--linkedin{background-color:#0077b5}.resp-sharing-button--linkedin:hover{background-color:#046293}.resp-sharing-button--email{background-color:#777}.resp-sharing-button--email:hover{background-color:#5e5e5e}.resp-sharing-button--xing{background-color:#1a7576}.resp-sharing-button--xing:hover{background-color:#114c4c}.resp-sharing-button--whatsapp{background-color:#25d366}.resp-sharing-button--whatsapp:hover{background-color:#1da851}.resp-sharing-button--hackernews{background-color:#f60}.resp-sharing-button--hackernews:hover,.resp-sharing-button--hackernews:focus{background-color:#fb6200}.resp-sharing-button--vk{background-color:#507299}.resp-sharing-button--vk:hover{background-color:#43648c}.resp-sharing-button--facebook{background-color:#3b5998;border-color:#3b5998}.resp-sharing-button--facebook:hover,.resp-sharing-button--facebook:active{background-color:#2d4373;border-color:#2d4373}.resp-sharing-button--twitter{background-color:#55acee;border-color:#55acee}.resp-sharing-button--twitter:hover,.resp-sharing-button--twitter:active{background-color:#2795e9;border-color:#2795e9}.resp-sharing-button--tumblr{background-color:#35465c;border-color:#35465c}.resp-sharing-button--tumblr:hover,.resp-sharing-button--tumblr:active{background-color:#222d3c;border-color:#222d3c}.resp-sharing-button--email{background-color:#777;border-color:#777}.resp-sharing-button--email:hover,.resp-sharing-button--email:active{background-color:#5e5e5e;border-color:#5e5e5e}.resp-sharing-button--pinterest{background-color:#bd081c;border-color:#bd081c}.resp-sharing-button--pinterest:hover,.resp-sharing-button--pinterest:active{background-color:#8c0615;border-color:#8c0615}.resp-sharing-button--linkedin{background-color:#0077b5;border-color:#0077b5}.resp-sharing-button--linkedin:hover,.resp-sharing-button--linkedin:active{background-color:#046293;border-color:#046293}.resp-sharing-button--reddit{background-color:#ff4500;border-color:#ff4500}.resp-sharing-button--reddit:hover,.resp-sharing-button--reddit:active{background-color:#ff5700;border-color:#ff5700}.resp-sharing-button--xing{background-color:#1a7576;border-color:#1a7576}.resp-sharing-button--xing:hover .resp-sharing-button--xing:active{background-color:#114c4c;border-color:#114c4c}.resp-sharing-button--whatsapp{background-color:#25d366;border-color:#25d366}.resp-sharing-button--whatsapp:hover,.resp-sharing-button--whatsapp:active{background-color:#1da851;border-color:#1da851}.resp-sharing-button--hackernews{background-color:#f60;border-color:#f60}.resp-sharing-button--hackernews:hover .resp-sharing-button--hackernews:active{background-color:#fb6200;border-color:#fb6200}.resp-sharing-button--vk{background-color:#507299;border-color:#507299}.resp-sharing-button--vk:hover .resp-sharing-button--vk:active{background-color:#43648c;border-color:#43648c}.resp-sharing-button--telegram{background-color:#54a9eb}.resp-sharing-button--telegram:hover{background-color:#4b97d1}</style><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https://maxdon.tech/posts/aca-zero-downtime-1/" target=_blank rel=noopener aria-label title=Facebook><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?text=Zero%20downtime%20deployment%20with%20Azure%20Container%20Apps%20and%20Github%20Actions%20-%20Part%201&url=https://maxdon.tech/posts/aca-zero-downtime-1/" target=_blank rel=noopener aria-label title=Twitter><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5.0-4.55 2.04-4.55 4.54.0.36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3.0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35.0 12.92-6.92 12.92-12.93.0-.2.0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div></div></a><a class=resp-sharing-button__link href="mailto:?subject=Zero%20downtime%20deployment%20with%20Azure%20Container%20Apps%20and%20Github%20Actions%20-%20Part%201&body=https://maxdon.tech/posts/aca-zero-downtime-1/" target=_self rel=noopener aria-label title=E-Mail><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9.0 6v12c0 1.1.9 2 2 2h20c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17.0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1.0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08.0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https://maxdon.tech/posts/aca-zero-downtime-1/&resubmit=true&title=Zero%20downtime%20deployment%20with%20Azure%20Container%20Apps%20and%20Github%20Actions%20-%20Part%201" target=_blank rel=noopener aria-label title=Reddit><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96.0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65.0 3-1.35 3-3s-1.35-3-3-3c-1.38.0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65.0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66.0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64.0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4.0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6.0.23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1.0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1.0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div></div></a><script src=https://giscus.app/client.js data-repo=ilmax/ilmax.github.io data-repo-id=R_kgDOI1C2VQ data-category=Comments data-category-id=DIC_kwDOI1C2Vc4CTw93 data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=dark_dimmed data-lang=en data-loading=lazy crossorigin=anonymous async></script></div></article></main></body></html>